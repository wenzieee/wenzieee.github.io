---
title: 实习第一周总结
---

## aTrust及华为云堡垒机的熟悉与使用

## 删除多个日志文件

mysql20250905.log

mysql20250906.log

mysql20250907.log

mysql20250908.log

mysql20250909.log

```shell
rm -rf mysql2025*
```

## tree

**tree命令默认使用ASCII字符集**：当目录名包含非ASCII字符（如中文）时，tree会将其转义为Unicode码点（如`\351\223\201`形式），而您的终端若未正确解析转义序列，就会显示乱码。

```shell
[root@kf-zgttslyypt-tyszr-xzzs ~]# tree V1.1.5.1铁塔版本/
V1.1.5.1\351\223\201\345\241\224\347\211\210\346\234\254/
├── V1.1.5.1\351\226\276\344\275\270\356\224\231\351\220\227\345\240\237\346\271\260
├── \345\272\224\347\224\250
│   ├── aiwrite-web.war
│   └── aiwrite.zip
├── \347\211\210\346\234\254\345\217\221\345\270\203\350\257\264\346\230\216\344\271\246.doc
├── \347\256\227\346\263\225
│   ├── ai-write-algorithm-service-1.1.4.tar.zip
│   └── ai-write-algorithm_V1.1.5.1.zip
└── \350\204\232\346\234\254
    └── V1.1.5.1.sql
```

使用`-N`参数直接显示原始字符：

```shell
[root@kf-zgttslyypt-tyszr-xzzs ~]# tree -N V1.1.5.1铁塔版本/
V1.1.5.1铁塔版本/
├── V1.1.5.1閾佸鐗堟湰
├── 应用
│   ├── aiwrite-web.war
│   └── aiwrite.zip
├── 版本发布说明书.doc
├── 算法
│   ├── ai-write-algorithm-service-1.1.4.tar.zip
│   └── ai-write-algorithm_V1.1.5.1.zip
└── 脚本
    └── V1.1.5.1.sql
```

## tar和zip

tar cvf baoname

tar xvf /root/.../xxx.tar -C /root/.../newname  



zip archive.zip file1.txt file2.txt dir1

unzip archive.zip -d /path/to/target_dir

## mv和cp

改名

mv /.../oldname /.../newname



cp ../aiwrite-algorithm_bak当日日期/docker-compose.yml .

 .代表复制到当前目录下

## ps -ef | grep tomcat

会显示两个进程，grep tomcat本身也是一个进程且包含tomcat，所以会出现两个进程。一般第一行是目标进程（tomcat）。

解决方法：

方法1：使用`grep -v grep`排除自身

```shell
ps -ef | grep tomcat | grep -v grep
```

方法2：使用字符类匹配

```shell
ps -ef | grep [t]omcat
```

`[t]omcat` 匹配 "tomcat"，但 `grep [t]omcat` 进程本身包含的是 "grep [t]omcat"，不匹配 "[t]omcat"



方法3：使用`pgrep`命令

```shell
pgrep -lf tomcat
```



| 命令    | 别名      | 正则支持         | 主要用途         | 性能特点               |
| ------- | --------- | ---------------- | ---------------- | ---------------------- |
| `grep`  | -         | BRE（基础）      | 文件内容搜索     | 通用，适合简单模式     |
| `egrep` | `grep -E` | ERE（扩展）      | 复杂正则匹配     | 功能强，但稍慢         |
| `fgrep` | `grep -F` | 无（固定字符串） | 快速搜索特殊字符 | 最快，不解析正则       |
| `pgrep` | -         | 无（进程名）     | 查找进程 PID     | 针对进程，不涉及文件   |
| `rgrep` | `grep -r` | 同 `grep`        | 递归搜索目录     | 依赖文件系统，可能较慢 |

## 脚本

./startup.sh & tail -f ../logs/catalina.out  

执行当前目录下的 `startup.sh` 脚本，并放入**后台运行**（`&` 符号实现）。实时监控并输出 `../logs/catalina.out` 文件的**新增内容**（`-f` 参数实现持续跟踪）。

## docker的简单使用



| **命令**              | **功能**                                         | **示例**                                   |
| :-------------------- | :----------------------------------------------- | :----------------------------------------- |
| `docker run`          | 启动一个新的容器并运行命令                       | `docker run -d ubuntu`                     |
| `docker ps`           | 列出当前正在运行的容器                           | `docker ps`                                |
| `docker ps -a`        | 列出所有容器（包括已停止的容器）                 | `docker ps -a`                             |
| `docker build`        | 使用 Dockerfile 构建镜像                         | `docker build -t my-image .`               |
| `docker images`       | 列出本地存储的所有镜像                           | `docker images`                            |
| `docker pull`         | 从 Docker 仓库拉取镜像                           | `docker pull ubuntu`                       |
| `docker push`         | 将镜像推送到 Docker 仓库                         | `docker push my-image`                     |
| `docker exec`         | 在运行的容器中执行命令                           | `docker exec -it container_name bash`      |
| `docker stop`         | 停止一个或多个容器                               | `docker stop container_name`               |
| `docker start`        | 启动已停止的容器                                 | `docker start container_name`              |
| `docker restart`      | 重启一个容器                                     | `docker restart container_name`            |
| `docker rm`           | 删除一个或多个容器                               | `docker rm container_name`                 |
| `docker rmi`          | 删除一个或多个镜像                               | `docker rmi my-image`                      |
| `docker logs`         | 查看容器的日志                                   | `docker logs container_name`               |
| `docker inspect`      | 获取容器或镜像的详细信息                         | `docker inspect container_name`            |
| `docker exec -it`     | 进入容器的交互式终端                             | `docker exec -it container_name /bin/bash` |
| `docker network ls`   | 列出所有 Docker 网络                             | `docker network ls`                        |
| `docker volume ls`    | 列出所有 Docker 卷                               | `docker volume ls`                         |
| `docker-compose up`   | 启动多容器应用（从 `docker-compose.yml` 文件）   | `docker-compose up`                        |
| `docker-compose down` | 停止并删除由 `docker-compose` 启动的容器、网络等 | `docker-compose down`                      |
| `docker info`         | 显示 Docker 系统的详细信息                       | `docker info`                              |
| `docker version`      | 显示 Docker 客户端和守护进程的版本信息           | `docker version`                           |
| `docker stats`        | 显示容器的实时资源使用情况                       | `docker stats`                             |
| `docker login`        | 登录 Docker 仓库                                 | `docker login`                             |
| `docker logout`       | 登出 Docker 仓库                                 | `docker logout`                            |

**常用选项说明:**

- **`-d`**：后台运行容器，例如 `docker run -d ubuntu`。
- **`-it`**：以交互式终端运行容器，例如 `docker exec -it container_name bash`。
- **`--name`**: 给容器命名。
- **`-t`**：为镜像指定标签，例如 `docker build -t my-image `。

## 镜像拉取失败原因

Error response from daemon: Head "https://cf-workers-docker-io-3e6.pages.dev/v2/hell-world/manifests/latest": Get "https://cf-workers-docker-io-3e6.pages.dev/token?scope=repository%3Ahell-world%3Apull&service=registry.docker.io": read tcp 192.168.88.101:57178->172.66.44.164:443: read: connection reset by peer



docker pull 镜像时一直报错，原因是用公司网，公司网拦截了请求，使用自己的网络即可。